export EDITOR='vim'
export LANG=en_US.UTF-8

if [ -d "$HOME/.oh-my-zsh" ]; then
  export ZSH="$HOME/.oh-my-zsh"

  # See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes
  ZSH_THEME="robbyrussell"

  plugins=(autoenv asdf git docker docker-compose vscode)

  # Compilation flags
  # export ARCHFLAGS="-arch x86_64"

  RPROMPT='%*'

  # Enable vi mode
  source $ZSH/oh-my-zsh.sh
fi

if ! which go > /dev/null; then
  export GOPATH=$HOME/code
  export PATH=$PATH:$GOPATH/bin
  export GOTELEMETRY=off
fi

if ! which asdf > /dev/null; then
  export PATH="${ASDF_DATA_DIR:-$HOME/.asdf}/shims:$PATH"
fi

# GPG
GPG_TTY=$(tty)
export GPG_TTY
if [ -f "${HOME}/.gpg-agent-info" ]; then
    source "${HOME}/.gpg-agent-info"
    export GPG_AGENT_INFO
    export SSH_AUTH_SOCK
fi

# RUBY
export RUBY_CONFIGURE_OPTS="--with-libyaml-dir=$(brew --prefix libyaml) --with-openssl-dir=$(brew --prefix openssl@3) --disable-install-doc"

{{- if eq .chezmoi.os "darwin" }}
if ! which brew > /dev/null; then
HOMEBREW_PREFIX="/usr/local"
# HOMEBREW FOLDER PREFIX FOR M1
if [[ $(uname -p) == 'arm' ]]; then
HOMEBREW_PREFIX="/opt/homebrew"
fi
eval $($HOMEBREW_PREFIX/bin/brew shellenv)

# AUTOENV
if ! which autoenv > /dev/null; then
source $HOMEBREW_PREFIX/opt/autoenv/activate.sh
fi

export PATH="$HOMEBREW_PREFIX/opt/libpq/bin:$PATH"
fi
{{- end }}

bindkey -v
# incremental search in insert mode
bindkey "^F" history-incremental-search-forward
bindkey "^R" history-incremental-search-backward

if [[ -e $HOME/.aliases ]] ; then source $HOME/.aliases ; fi
if [[ -e $HOME/.privatealiases ]] ; then source $HOME/.privatealiases ; fi
if [[ -e $HOME/.privateer ]] ; then export PATH="$HOME/.privateer/bin:$PATH" ; fi
