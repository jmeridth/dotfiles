# kubernetes
alias k="kubectl"
alias kshell="~/code/dotfiles/bin/kshell"
alias kexec="kubectl exec --stdin --tty $1 -- /bin/bash"
alias kconf="vim ~/.kube/config"
alias kcheat="open https://kubernetes.io/docs/reference/kubectl/cheatsheet/"
alias kn="kubens"
alias kc="kubectx"
alias debug="kubectl run -i --tty --rm debug --image=ubuntu:latest --restart=Never -- /bin/bash"
alias debugalpine="kubectl run -i --tty --rm debug --image=alpine:3.7 --restart=Never -- /bin/sh"

# localenv
function localenv='f() { @export $(cat .env | xargs) };f'

# ffmpeg
alias codec="ffprobe -v error -select_streams v:0 -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 $1"

# aws
alias awsprofiles='export AWS_PROFILE=$(sed -n "s/\[profile \(.*\)\]/\1/gp" ~/.aws/config | fzf)'
alias awslogin='awsprofiles && aws sso login'

# postgres
function pgtest='f() { docker exec -it "$1" /usr/bin/perl /usr/bin/psql -U postgres };f'

# aws
alias awssso="aws configure sso"

# terraform/terragrunt
alias tf="terraform"
alias tg="terragrunt"
alias tgraph="terraform graph | dot -Tsvg > graph.svg"

# tmux
alias tn="tmux -S /tmp/pair"
alias to="tmux -S /tmp/pair a"
alias mux="tmuxinator"

# clean
alias killdsstore="find . -name '.DS_Store' -type f -delete"

# blog
alias blog="cd ~/code/jmeridth.github.io"

# docker
function px(){
podman exec -it "$1" /bin/bash
}
alias podmandebugalpine="podman run -it --rm --name debug alpine:3.7 /bin/sh"
alias podmandebugubuntu="podman run -it --rm --name debug ubuntu:latest /bin/sh"
alias pdebug="podman run -d --name debug -ti $1 /bin/bash"
alias pid="podman images --quiet --filter 'dangling=true' | xargs podman rmi"
alias psp="podman system prune -af"
alias pkc="podman ps -aq | xargs podman rm -f"
alias pkui="podman rmi $(podman images | grep '^<none>' | awk '{print $3}')"
alias pki="podman images -aq | xargs podman rmi -f"
alias pkv="podman volume ls -qf dangling=true | xargs podman volume rm"
alias pka="dkc;dki;dkv;dsp"
alias osxpodman="podman run -it --rm --privileged --pid=host justincormack/nsenter1"

# fix external display detection
alias getautorandr="sudo wget https://raw.githubusercontent.com/wertarbyte/autorandr/master/autorandr -O /usr/bin/autorandr && sudo chmod +x /usr/bin/autorandr"
alias fixdisplays="getautorandr && autorandr --change"

# mysql
alias mysqlstop="sudo systemctl stop mysql"
alias mysqlstart="sudo systemctl start mysql"

# APT-GET
alias update="sudo apt update && sudo apt upgrade -y && sudo apt dist-upgrade -y && sudo apt autoclean -y && sudo apt autoremove -y"

# config files
alias vimrc="vim ~/.vimrc"
alias zshrc="vim ~/.zshrc"
alias aliases="vim ~/.aliases"

# cli usage
alias ..="cd .."
alias senv="source ~/.zshrc && cd ."

# cd helpers
alias dotfiles="cd ~/code/dotfiles"

# ag
function agsearch(){
  ag --$1 -i $2 .
}
alias agp='agsearch "py" $1'
alias agr='agsearch "rb" $1'

# gpg
alias gpgreset='gpgconf --kill gpg-agent && gpg --card-status'
alias jmencrypt='(){gpg --output "$1".gpg --encrypt --recipient jmeridth@gmail.com "$1"}'
alias jmdecrypt='(){gpg --output "$1" --decrypt "$1".gpg}'
alias jmtest='(){echo "$1".gpg}'

# json
alias json="python -m json.tool"

# python
alias pyclean="find . -name '*.pyc' -delete"
alias pyinit="touch __init__.py"
alias py="ptpython"
alias activate="pyenv activate $1"
alias deactivate="pyenv deactivate"

# git (that aren't provided with ohmyzsh git plugin)
alias gl='git pull -r --prune'
alias gs='git status -sb'
alias gcas!='gca! -s'

# tar
alias tardir='tar -czvf "$1"'
alias untarzippeddir='tar -xzvf "$1" "$2"'
alias untardir='tar -xvf "$1"'

# ls
alias l='ls -lah --color'

# intellij (on osx)
alias intellij='open -a IntelliJ\ IDEA ./'

# grc overides for ls
#   Made possible through contributions from generous benefactors like
#   `brew install coreutils`
if $(gls &>/dev/null)
then
  alias l="gls -lAh --color"
  alias ll="gls -l --color"
  alias la='gls -A --color'
fi

if [[ "$OSTYPE" == "darwin"* ]]; then
  if [[ -a $HOME/.aliases.osx ]] ; then source $HOME/.aliases.osx ; fi
fi

if [[ "$OSTYPE" == "linux"* ]]; then
  if [[ -a $HOME/.aliases.linux ]] ; then source $HOME/.aliases.linux ; fi
fi
